# Дашборд и CrawlingView

## Что показывать на дашборде при запущенном краулинге

- **Статус:** «Краулинг идёт» + индикатор.
- **Стартовый URL** и **текущая страница:** `startUrl` и `currentLoadingUrl`.
- **Прогресс:** обработано / в очереди + лимиты из настроек (maxPages, maxDepth).
- **Краткая сводка:** сколько страниц в списке, сколько ошибок.
- **Действие:** кнопка «Открыть краул» → переход на CrawlingView (таблица страниц в реальном времени).

Когда краул не идёт: последний результат (статус, стартовый URL, обработано N страниц, ошибок M), кнопки «Открыть краул», «Браузер», «Карта сайта», «Настройки».

---

## CrawlingView — «как браузер, но без браузера»

**Идея:** отдельный вью без WebContentsView, только таблица всех страниц текущего краула.

**Источник данных:** `crawl.pagesByUrl` и `crawl.pageOrder` (плюс при желании `errors`). Во время краула таблица обновляется сама (данные в Redux).

**Колонки таблицы (пример):** №, URL, Title, H1, Status, Load (ms), Ссылок, Ошибка. URL кликабельно → переход в Browser и открытие страницы (`requestNavigate`). Ошибка — если запись есть в `crawl.errors` по url.

**Реализация:** добавить вью `crawling` в `AppView`, пункт в сайдбаре, роут в `App.tsx` на `CrawlingView`. Таблица по `pageOrder` + `pagesByUrl`; при большом числе строк — виртуализация (по аналогии с SiteMapView).

---

## Расширенные идеи для дашборда (не только метрики)

### Быстрый старт и последний контекст

- **«Продолжить с …»** — карточка с последним стартовым URL и кнопкой «Запустить краул» или «Открыть в браузере».
- **«Недавние стартовые URL»** — последние 5–10 URL; клик → подставить в поле ввода и при желании запустить.
- **«Повторить последний краул»** — те же настройки и startUrl; одна кнопка «Запустить снова».

### Ошибки и проблемные страницы

- **Блок «Последние ошибки»** — URL + короткое описание (таймаут, 4xx/5xx). Клик → открыть в браузере или перейти в CrawlingView.
- **«Проблемные страницы»:** без title, без h1, meta robots noindex — отдельный список с переходом к странице или в карту сайта.
- Подсказка: «Исправить ошибки в браузере» или «Проверить настройки таймаута».

### Рекомендации после краула

- «Достигнут лимит 200 страниц — в очереди осталось N. Увеличить maxPages в настройках?»
- «Найдено X страниц без title — проверьте карту сайта.»
- «Краул занял M мин (Y стр/мин). Уменьшить delay в настройках для ускорения?»

### Карточки быстрых действий

Крупные кнопки: Браузер, Карта сайта, Краул (CrawlingView / Запустить), Настройки краула, Экспорт (если будет).

### Сводка по текущему набору страниц

- По глубине: «Глубина 0: 1 стр., 1: N стр., 2: M стр.» (столбчатая диаграмма или подписи).
- По доменам (если мультидоменный краул).
- По типу проблем: без title, без h1, с ошибками — список с переходом.
- «Размер»: N страниц, при наличии — сумма contentLength или «~X MB».

### Таймлайн и скорость

- Длительность последнего краула, скорость (страниц/мин).
- Строка: «Последний краул: 12 мин, 180 стр. (~15 стр/мин).»

### Визуализация структуры

- Дерево по глубине или мини-граф «startUrl → первые обнаруженные URL» (обзор структуры).

### Пустое состояние

- Если краулов ещё не было: «Введите URL вверху и нажмите «Запустить» или «Перейти»», плюс карточки Браузер, Карта сайта, Настройки.
